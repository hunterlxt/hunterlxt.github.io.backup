---
layout:     post
title:      "第一次正儿八经的实习"
subtitle:   "first intern experience"
date:       2019-07-06
author:     "TXXT"
catalog:    true
tags:
    - 随笔
---

转眼之间，我的研究生生涯的第二年已经结束，现在我在一家初创型数据库公司实习。在秋招来临之际，思考了很多事情。我不擅长写文字，但还是希望记录下我的经历，说不定几年后回来再看别有一番趣味。

## 去 PingCAP 之前的事

​		正式考虑以后将编程作为人生的新方向是在即将大四的暑假。这一切的由来是因为我在大二做出了一个决定——加入电气卓越工程师计划。正是这个决定让我的培养方案和普通的电气学生不太一样，我提前进入了不同的电气企业实习，在企业中我才认识到**我以为的根本就不是我以为的**。好比一个高中生说他爱物理，做物理实验有意思，所以以后想学物理专业那样。总而言之，我不喜欢这个专业，两个月的暑期时间消耗在重庆的一家电控设备厂。那时我阅读了 《浪潮之巅》和《C语言程序设计》，决定以后转行。现在想想真好玩，仅仅学了C语言就要转行，听起来天马行空。

​		后来准备了一学期考研从一所末流985进入到另外一所末流985，正式开始了我的计算机学业生涯。但成为研究生之后，我认识到我也不适合科研。研一的时候导师还没怎么放弃我，让我读一些文章，我总是在思考那些东西怎么实现，它们的实现舍弃了什么，是不是一个好的设计。对于科研工作者，这些思考只会成为噪音，因为写文章仅仅需要考虑这个问题怎么建模，是否有创新，怎么写成一个动人的故事。另一件事是研一的时候我们有些编程作业，我发现对于写的每个程序，我都在思考这么设计是不是最佳实践，然并卵，老师不关心你的过程，他只想要一个结果，哪怕这是你 copy 的。我对国内高校的教育很失望，开始读一些国外原版教材，跟一些公开的课程。同时磨练了一下我的 C++ 技能，途中短暂参与了其它导师关于文件系统相关的项目。慢慢的，我发现怎么去解决一个问题才是让我兴奋的。

​		今年春招我主要投递了四个方向——拼多多存储组，鹅厂IEG，PingCAP TiKV，阿里云。给我的感触最大的是：**公司特别需要会刷题的学生**，除了 PingCAP，每家公司都要你做线上的 OJ 题，然后淘汰一大波人，我不知道公司为什么这么设计，会刷题和会写程序在我眼里几乎没任何关联性，你可能会说考察算法，但是算法思想合格的计算机学生都能理解，OJ 题更像是脑筋急转弯，而且还是那种只要大量训练就能熟练的急转弯。所以匪夷所思的事情出现了，为了拿到实习 offer，我必须要和大家一起刷题，当刷 OJ 带有功利性，它就失去了乐趣了。

​		拼多多是唯一没给我 offer 的，估计是因为在线 OJ 的问题，只记得 HR 小姐姐是几家里最好看的。

​		鹅厂的面试有点玄学，一面的小哥哥让我做三道牛客网的 OJ 题，然而只有第一道 accepted，没想到还是进了二面，二面面了两个小时，从哈希环问到了 Cassandra，从C++对象模型问到 LevelDB 存储过程。怎么说呢，问题都是好问题，但面试官问的都很浅，比如哈希环查找后续结点时有多种设计，按照2的幂递增或者依次递增，但是面试官只听到我说了大概后就继续下一个问题了。(Note: 鹅厂的小姐姐声音很好听)

​		PingCAP 的面试记忆最深刻，因为没有 OJ 题环节，第一环节就是一个编程小作业，一周内实现一个持久化存储的 client-server demo。做的时候顺便学了下 Libuv，面试的过程就是学习的过程。后面三面问的问题也都比较有深度，我记得第三面问了一些让我设计 RocksDB 相关的问题，我觉得这类问题就很好，实习生往往没有太多实践经历，这种设计问题没有和具体的代码耦合，但考察了你对于系统的理解深度。

​		阿里的面试一波三折，先内推了 X-DB 组，结果没接到电话就显示简历筛选没通过。后来听说那个时候 X-DB 组有很大的人员调整，不知道和这有没有关系。后续简历被盘古团队捞起，盘古的二面简直被血虐，从 RocksDB 的 Log 流程问到 iterator 的设计思想。被虐的心服口服，自然挂在了二面。可能面试官觉得我 OS 掌握不错，把我推到了阿里云系统内核组，内核是我的强项，因此顺利拿到 offer。

​		因为阿里给 offer 时我已经在 PingCAP 实习，而且也在面试中向二面面试官说过我在 PingCAP 有最少四个月的实习保证，所以一直没接受阿里的 offer（不过我阿里二面面试官也真的强，Google了这个团队，在 OSDI 上硕果累累，经常给 Linux 社区提交 patch）。

## 实习的感悟

​		读研的时候我是导师第一个学生，而且她的方向很学术，和我的规划不符，所以大部分时候靠自己填坑。在 PingCAP 我遇到了计算机生涯中的第一个引路人——Jay。刚开始接触还比较高冷，但是后来我的问题他真的都会耐心去一个个解释，真的太赞了。而且会给出一些指导性地建议，我来公司后才写出第一句 Hello world （Rust版本），在 Rust 领域我的经验很少，因此很多细节上的问题他也能给与指导。

​		印象最深地就是他说过一句话：”**事出必有因，需要静下心来思考观察**“。在学校时查资料我的心态非常浮躁，仅仅查到 doc 的介绍和 examples 就不深究了。但是 Rust 相关的库大都不成熟，文档资料非常少，很多时候理解别人的 crates 只能靠读源码。现在我也养成了这个习惯，其实读源码不难，只是之前总想逃避，总觉得这些知道怎么用就行，但不读源码你就不理解真正的原理，就好比学习 LevelDB，你如果从博客和面经学习，永远学到的二手三手资料，只有 get your hands dirty，才能摸清事物的本质。这也是我想谈的关于实习最大的感悟——不要惧怕，所有事情都是有其逻辑的。

​		另外一个感受最深的就是，大家为了一个目标去创造，这种感觉非常地梦幻。因为我们的领域是 system，所以没有 PM 布置任务，唐老师就是我们的 PM，工程师和工程师交流只需要用最传统的仪式——代码。每一个小的细节在 review 时都可能被提出修改意见，我学习到了大量的工程实践的方法。在这家公司我感受到**作为一个系统工程师的自豪感**。

​		当然实习的感悟不仅仅这些，不过我想这两点是最重要的。其它的感受主要包含在以下关键词列表：["TiKV", "gRPC", "Compile&Link", "C++", "Rust", "Interceptor", "Performance", "Team Building", "Remote work", "Efficiency"]。

​		之前和我妈说到实习去向，她说我有腾讯 offer 为什么还去小公司。我不知道我的选择是不是正确的，但是参与到 TiKV 的开源项目，有这么优秀的 mentor，顺便还有钱拿，真的让人做梦都能笑醒。